/*
 * DC jQuery Social Stream
 * Copyright (c) 2013 Design Chemical
 * http://www.designchemical.com/blog/index.php/premium-jquery-plugins/jquery-social-stream-plugin/
 * Version 1.5.1 (12-3-2013)
 *
 */(function(e){function t(t,n,s,d,y,b,w,E,S,x,T){var N=e(".stream",y),C=[],k="",L=300,A=[],O,M,_,D=b.limit,P=[],H;frl="https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+D+"&callback=?&q=";switch(t){case"facebook":var B=n.split("/");_=_=B.length>1?"https://graph.facebook.com/"+B[1]+"/photos?limit="+D:frl+encodeURIComponent("https://www.facebook.com/feeds/page.php?id="+n+"&format=rss20");break;case"twitter":var j=d.url.replace(/\&#038;/gi,"&"),B=n.split("/"),F=n.split("#"),I=d.url.split("?"),q=d.replies==1?"&exclude_replies=false":"&exclude_replies=true",R="&include_entities=true&include_rts="+d.retweets+q;X=I.length>1?j+"&":j+"?";_=B.length>1?X+"url=list&list_id="+B[1]+"&per_page="+D+R:X+"url=timeline&screen_name="+n+"&count="+D+R;if(F.length>1){var U=d.retweets==0?"+exclude:retweets":"";_=X+"url=search&q="+encodeURIComponent(F[1])+"&count="+D}break;case"google":D=D>100?100:D;M="https://plus.google.com/"+n;_="https://www.googleapis.com/plus/v1/people/"+n+"/activities/public";O={key:d.api_key,maxResults:D,prettyprint:!1,fields:"items(id,kind,object(attachments(displayName,fullImage,id,image,objectType,url),id,objectType,plusoners,replies,resharers,url),published,title,url,verb)"};break;case"youtube":var B=n.split("/"),F=n.split("#");D=D>50?50:D;M="https://www.youtube.com/";M+=F.length>1?"results?search_query="+encodeURIComponent(F[1]):"user/"+n;M=B.length>1?"https://www.youtube.com/playlist?list="+B[1]:M;_="https://gdata.youtube.com/feeds/";B.length>1?_+="api/playlists/"+B[1]+"?v=2&orderby=published":_+=F.length>1?"api/videos?alt=rss&orderby=published&max-results="+D+"&racy=include&q="+encodeURIComponent(F[1]):"base/users/"+n+"/"+x+"?alt=rss&v=2&orderby=published&client=ytapi-youtube-profile";_=frl+encodeURIComponent(_);break;case"flickr":var F=n.split("/"),z=F.length>1?"groups_pool":"photos_public";n=F.length>1?F[1]:n;M="https://www.flickr.com/photos/"+n;_="http://api.flickr.com/services/feeds/"+z+".gne?id="+n+"&lang="+d.lang+"&format=json&jsoncallback=?";break;case"delicious":M="https://www.delicious.com/"+n;_="http://feeds.delicious.com/v2/json/"+n;break;case"pinterest":var B=n.split("/");_="https://www.pinterest.com/"+n+"/";_+=B.length>1?"rss":"feed.rss";M="http://www.pinterest.com/"+n;_=frl+encodeURIComponent(_);break;case"rss":M=n;_=frl+encodeURIComponent(n);break;case"lastfm":M="https://www.last.fm/user/"+n;var W=x=="lovedtracks"?"2.0":"1.0";_=frl+encodeURIComponent("https://ws.audioscrobbler.com/"+W+"/user/"+n+"/"+x+".rss");break;case"dribbble":M="https://www.dribbble.com/"+n;_=x=="likes"?"http://api.dribbble.com/players/"+n+"/shots/likes":"http://api.dribbble.com/players/"+n+"/shots";break;case"vimeo":M="https://www.vimeo.com/"+n;_="https://vimeo.com/api/v2/"+n+"/"+x+".json";break;case"stumbleupon":M="https://www.stumbleupon.com/stumbler/"+n;_=frl+encodeURIComponent("http://rss.stumbleupon.com/user/"+n+"/"+x);break;case"deviantart":M="https://"+n+".deviantart.com";_=frl+encodeURIComponent("https://backend.deviantart.com/rss.xml?type=deviation&q=by%3A"+n+"+sort%3Atime+meta%3Aall");break;case"tumblr":M="https://"+n+".tumblr.com";_="http://"+n+".tumblr.com/api/read/json?callback=?";break;case"instagram":M="#";_="https://api.instagram.com/v1";var B=n.substr(0,1),F=n.split(B),X=encodeURIComponent(F[1]),V="",J=0;switch(B){case"?":var K=F[1].split("/");V="&lat="+K[0]+"&lng="+K[1]+"&distance="+K[2];_+="/media/search";break;case"#":_+="/tags/"+X+"/media/recent";J=1;break;case"!":_+="/users/"+X+"/media/recent";break;case"@":_+="/locations/"+X+"/media/recent"}d.accessToken==""&&J==0&&(location.hash?d.accessToken=location.hash.split("=")[1]:location.href="https://instagram.com/oauth/authorize/?client_id="+d.clientId+"&redirect_uri="+d.redirectUrl+"&response_type=token");_+="?access_token="+d.accessToken+"&client_id="+d.clientId+"&count="+D+V}var Q=t=="twitter"?"json":"jsonp";jQuery.ajax({url:_,data:O,cache:b.cache,dataType:Q,success:function(h){var v="";switch(t){case"facebook":B.length>1?h=h.data:h.responseStatus==200?h=h.responseData.feed.entries:v=h.responseDetails;break;case"google":v=h.error?h.error:"";h=h.items;break;case"flickr":h=h.items;break;case"instagram":h=h.data;break;case"twitter":v=h.errors?h.errors:"";F.length>1&&(h=h.statuses);break;case"youtube":if(h.responseStatus==200){h=h.responseData.feed.entries;if(B.length>1)var m=B[0]}else v=h.responseDetails;break;case"dribbble":h=h.shots;break;case"tumblr":h=h.posts;break;case"delicious":break;case"vimeo":break;default:h.responseStatus==200?h=h.responseData.feed.entries:v=h.responseDetails}v==""?e.each(h,function(h,v){if(h<D){var y=[],N=v.link,k='<a href="'+M+'">'+n+"</a>",A="",O='<a href="'+N+'">'+v.title+"</a>",_="",P="",H="",j="",F=v.publishedDate,I=N,q=v.title,R="";switch(t){case"facebook":if(B.length>1){n=v.from.id;var F=new Date;F=F.setFbAlbum(v.updated_time);var U=c(v.link);q=B[0]!=""?B[0]:v.from.name;k='<a href="http://www.facebook.com/media/set/?set='+U[1]+'">'+q+"</a>";O="";P='<a href="'+v.link+'"><img src="'+v.images[d.image_width].source+'" alt="" /></a>';if(d.comments>0&&v.comments){h=0;j+='<span class="meta"><span class="comments">comments</span></span>';e.each(v.comments.data,function(e,t){if(!(d.comments>e))return!1;j+='<span class="meta item-comments"><a href="http://facebook.com/'+t.from.id+'">'+t.from.name+"</a>"+t.message+"</span>";e++})}P+=j}else P=v[d.text];break;case"twitter":F=u(v.created_at);var z=v.user.screen_name,W=v.user.profile_image_url_https;M="https://www.twitter.com/"+z;N=M;_='<a href="'+N+'" class="thumb"><img src="'+W+'" alt="" /></a>';P='<span class="twitter-user"><a href="https://www.twitter.com/'+z+'"><strong>'+v.user.name+" </strong>@"+z+"</a></span><br />";P+=r(v.text);d.images!=""&&v.entities.media&&e.each(v.entities.media,function(e,t){P+='<a href="'+t.media_url_https+'"><img src="'+t.media_url_https+":"+d.images+'" alt="" /></a>'});I=v.id_str;break;case"delicious":var F=new Date;F=F.setRFC3339(v.dt);O='<a href="'+v.u+'">'+v.d+"</a>";N=v.u;P=v.n;I=v.u;q=v.d;break;case"rss":P=v[d.text];break;case"pinterest":var X=e("img",v.content).attr("src");_=X?'<a href="'+N+'"><img src="'+X+'" alt="" /></a>':"";P=v.contentSnippet;q=P;break;case"youtube":var V=[];V=c(v.link);_='<a href="'+N+'"><img src="http://img.youtube.com/vi/'+V.v+"/"+d.thumb+'.jpg" alt="" /></a>';P=v.contentSnippet;B.length>1&&(k='<a href="'+M+'">'+m+"</a>");break;case"flickr":F=u(v.published);O=v.title;_='<a href="'+N+'" title="'+v.title+'"><img src="'+v.media.m+'" alt="" /></a>';break;case"lastfm":N=v.content;break;case"dribbble":N=v.url;F=v.created_at;_='<a href="'+N+'"><img src="'+v.image_teaser_url+'" alt="'+v.title+'" /></a>';P='<span class="meta"><span class="views">'+l(v.views_count)+'</span><span class="likes">'+l(v.likes_count)+'</span><span class="comments">'+l(v.comments_count)+"</span></span>";I=v.url;break;case"instagram":F=parseInt(v.created_time*1e3,10);O="";_='<a href="'+v.images[d.thumb].url+'"><img src="'+v.images[d.thumb].url+'" alt="" /></a>';P=v.caption!=null?i(v.caption.text):"";if(v.comments.count>0&&d.comments>0){h=0;j+='<span class="meta"><span class="comments">'+l(v.comments.count)+" comments</span></span>";e.each(v.comments.data,function(e,t){if(!(d.comments>e))return!1;j+='<span class="meta item-comments"><img src="'+t.from.profile_picture+'" />';j+=t.from.full_name+" - "+t.text+"</span>";e++})}if(v.likes.count>0&&d.likes>0){h=0;j+='<span class="meta"><span class="likes">'+l(v.likes.count)+" likes</span></span>";j+='<span class="meta item-likes">';e.each(v.likes.data,function(e,t){if(!(d.likes>e))return!1;j+='<img src="'+t.profile_picture+'" />';e++});j+="</span>"}k='<a href="'+N+'">'+v.user.username+"</a>";q=v.caption!=null?v.caption.text:"";break;case"vimeo":f=x,K=v.name,Q=v.description,N=v.url;if(f=="channels")_=v.logo!=""?'<a href="'+N+'" class="logo"><img src="'+v.logo+'" alt="" width="'+L+'" /></a>':"";else if(f=="groups")_='<a href="'+N+'"><img src="'+v.thumbnail+'" alt="" /></a>';else{var J="thumbnail_"+d.thumb,K=v.title,Q=f!="albums"?v.duration+" secs":v.description;_='<a href="'+v.url+'"><img src="'+v[J]+'" alt="" /></a>'}O='<a href="'+N+'">'+K+"</a>";P=Q;if(d.stats==1){var j="";j+=f=="albums"||f=="channels"||f=="groups"?'<span class="videos">'+l(v.total_videos)+"</span>":"";f=="channels"?j+='<span class="users">'+l(v.total_subscribers)+"</span>":f=="groups"?j+='<span class="users">'+l(v.total_members)+"</span>":f!="albums"&&(j+='<span class="likes">'+l(v.stats_number_of_likes)+'</span><span class="views">'+l(v.stats_number_of_plays)+'</span><span class="comments">'+l(v.stats_number_of_comments)+"</span>");P+='<span class="meta">'+j+"</span>"}var G=v.upload_date;if(f=="likes")G=v.liked_on;else if(f=="albums"||f=="channels"||f=="groups")G=v.created_on;var F=new Date;F=F.setVimeo(G);I=N;q=K;break;case"stumbleupon":var X=e("img",v.content).attr("src");_=X!=""&&x=="favorites"?'<a href="'+N+'"><img src="'+X+'" alt="" /></a>':"";P=v.contentSnippet;break;case"deviantart":var X=e("img",v.content).attr("src");_=X?'<a href="'+N+'"><img src="'+X+'" alt="" /></a>':"";P=v.contentSnippet;break;case"tumblr":N=v["url-with-slug"];F=v.date;O='<a href="'+N+'">';switch(v.type){case"photo":O=v["photo-caption"];P='<a href="'+N+'"><img src="'+v["photo-url-"+d.thumb]+'" alt="" /></a>';q=O;break;case"video":O+=v["video-caption"];P=d.video!="400"?v["video-player-"+d.video]:v["video-player"];q=O;break;case"regular":O+=v["regular-title"];P=v["regular-body"];q=O;break;case"quote":O+=v["quote-source"];P=v["quote-text"];q=O;break;case"audio":O=v["id3-artist"]?'<a href="'+N+'">'+v["id3-artist"]+" - "+v["id3-album"]+"</a>":"";O+=v["id3-title"]?'<a href="'+N+'" class="track">'+v["id3-title"]+"</a>":"";P=v["audio-caption"];P+=v["audio-player"];q=v["id3-artist"]+" - "+v["id3-album"]+" - "+v["id3-title"];break;case"conversation":O+=v["conversation-title"];P=v["conversation-text"];q=O;break;case"link":var Y=v["link-text"].replace(/:/g,"").replace(/\?/g,"").replace(/\!/g,"").replace(/\./g,"");O='<a href="'+v["link-url"]+'">'+Y+"</a>";P=v["link-description"];q=Y}O+=v.type!="photo"||v.type!="audio"?"</a>":"";q=o(q);I=N;break;case"google":var Z=v.object.replies?l(v.object.replies.totalItems):0,j=v.object.plusoners?l(v.object.plusoners.totalItems):0,et=v.object.resharers?l(v.object.resharers.totalItems):0,tt,F=new Date;F=F.setRFC3339(v.published);tt={src:"",imgLink:"",useLink:"",useTitle:""};var nt=v.object.attachments;if(nt&&nt.length){for(var rt=0;rt<nt.length;rt++){var it=nt[rt];if(it.image){tt.src=it.image.url;tt.imgLink=it.url;if(it.fullImage){tt.w=it.fullImage.width||0;tt.h=it.fullImage.height||0}}it.objectType=="article"&&(tt.useLink=it.url);it.displayName&&(tt.useTitle=it.displayName)}tt.useLink||(tt.useLink=tt.imgLink);var st=d.image_height?d.image_height:75,ot=d.image_width?d.image_width:75;tt.src.indexOf("resize_h")>=0&&(tt.src=tt.w>=tt.h?tt.src.replace(/resize_h=\d+/i,"resize_h="+st):tt.src.replace(/resize_h=\d+/i,"resize_w="+ot))}tt=tt;N=tt.useLink;_=tt.src?(tt.useLink?'<a href="'+tt.useLink+'">':"")+'<img src="'+tt.src+'" />'+(tt.useLink?"</a>":""):"";var ut=L/(tt.w/tt.h)<L/3?' class="clear"':"";O=(tt.useLink?'<a href="'+tt.useLink+'"'+ut+">":"")+(v.title?v.title:tt.useTitle)+(tt.useLink?"</a>":"");d.shares&&(P='<span class="meta"><span class="plusones">+1s '+j+'</span><span class="shares">'+et+'</span><span class="comments">'+Z+"</span></span>");I=N;q=tt.useTitle}icon='<a href="'+M+'"><img src="'+s+d.icon+'" alt="" class="icon" /></a>';if(t=="twitter"){var at="https://twitter.com/intent/";R='<a href="'+at+"tweet?in_reply_to="+I+"&via="+b.twitterId+'" class="share-reply"></a>';R+='<a href="'+at+"retweet?tweet_id="+I+"&via="+b.twitterId+'" class="share-retweet"></a>';R+='<a href="'+at+"favorite?tweet_id="+I+'" class="share-favorite"></a>'}else R=g(q,I,b.twitterId);e.each(d.out.split(","),function(n,r){H+=r!="intro"?'<span class="section-'+r+'">':"";switch(r){case"intro":t=="twitter"?zintro='<span class="section-'+r+'"><a href="'+N+'">'+decodeURIComponent(S)+'</a> <span><a href="https://twitter.com/'+z+"/status/"+v.id_str+'">'+a((new Date(F)).getTime(),0)+"</a></span></span>":zintro='<span class="section-'+r+'"><a href="'+N+'">'+decodeURIComponent(S)+"</a> <span>"+a((new Date(F)).getTime(),0)+"</span></span>";break;case"title":H+=O;break;case"thumb":if(t=="rss"){var i=v.content.indexOf("img")>=0?e("img",v.content).attr("src"):"";_=i?'<a href="'+N+'" class="thumb"><img src="'+i+'" alt="" /></a>':""}H+=_;break;case"text":H+=P;break;case"user":H+=k;break;case"meta":H+=j;break;case"share":H+=R}H+=r!="intro"?"</span>":""});var ft=t=="instagram"?a(F,1):a((new Date(F)).getTime(),1),lt=ft;switch(b.order){case"random":lt=p(6);break;case"none":lt=1}var ct='<li rel="'+lt+'" class="dcsns-li dcsns-'+t+" dcsns-feed-"+T+'">'+A+'<div class="inner">'+H+'<span class="clear"></span></div>'+zintro+icon+"</li>";if(b.max=="days"){if(ft<=E*86400&&ft>=w*86400)C.push(ct);else if(ft>E*86400)return!1}else C.push(ct)}}):b.debug==1&&C.push('<li class="dcsns-li dcsns-error">Error. '+v+"</li>")},complete:function(){var r=e(C.join(""));if(b.wall==1)N.isotope("insert",r);else{N.append(r);h(N,"asc")}t=="facebook"&&B.length<2?v(n,r):t=="flickr"&&F.length>1&&m(F[1],r)}});return}function r(e){e=e.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(e){var t=e.match("^https?://")?e:"http://"+e;return'<a href="'+t+'">'+e+"</a>"});e=e.replace(/(^|\s)@(\w+)/g,'$1@<a href="http://www.twitter.com/$2">$2</a>');e=e.replace(/(^|\s)#(\w+)/g,'$1#<a href="http://twitter.com/search/%23$2">$2</a>');return e}function i(t){return e("<div/>").text(t).html()}function o(t){var n=e(t);return n.text()}function u(e){var t=e;return t}function a(e,t){var r=Math.round((+(new Date)-e)/1e3),i="";if(t==1)return r;if(t==0){var o=new Array;o[0]=[31536e3,"year","years"];o[1]=[2592e3,"month","months"];o[2]=[604800,"week","weeks"];o[3]=[86400,"day","days"];o[4]=[3600,"hr","hrs"];o[5]=[60,"min","mins"];var u=0,a=o.length;for(u=0;u<a;u++){s=o[u][0];if((xj=Math.floor(r/s))!=0){n=xj==1?o[u][1]:o[u][2];break}}i+=xj==1?"1 "+n:xj+" "+n;if(u+1<a){s2=o[u+1][0];if((xj2=Math.floor((r-s*xj)/s2))!=0){n2=xj2==1?o[u+1][1]:o[u+1][2];i+=xj2==1?" + 1 "+n2:" + "+xj2+" "+n2}}i+=" ago";return i}}function l(e){var t=e;e>999999?t=Math.floor(e/1e6)+"M":e>9999?t=Math.floor(e/1e3)+"K":e>999&&(t=Math.floor(e/1e3)+","+e%1e3);return t}function c(e){var t=[],n,r=e.split("?")[1];if(r!=undefined){r=r.split("&");for(var i=0;i<r.length;i++){n=r[i].split("=");t.push(n[1]);t[n[0]]=n[1]}}return t}function h(t,n){var r=e("li",t);r.sort(function(t,r){var i=parseInt(e(t).attr("rel"),10),s=parseInt(e(r).attr("rel"),10);return n=="asc"?i>s?1:-1:i<s?1:-1});e.each(r,function(e,n){t.append(n)});e(".dcsns-loading").slideUp().remove();return}function p(e){var t=0,n="";while(t<e){n+=Math.floor(Math.random()*10+1)+"";t++}return n}function d(t,n,r){var i=e("li:last",t),s=e("li:first",t),o,u=s.outerHeight(!0);if(e("li",t).not(".inactive").length>2)if(n=="next"){o=i.clone().hide();s.before(o);i.remove();if(!i.hasClass("inactive")){e(".inner",o).css({opacity:0});o.slideDown(r,"linear",function(){e(".inner",this).animate({opacity:1},r)});return}d(t,n,r)}else{o=s.clone();if(s.hasClass("inactive")){i.after(o);s.remove();d(t,n,r)}else{s.animate({marginTop:-u+"px"},r,"linear",function(){i.after(o);s.remove()});e(".inner",s).animate({opacity:0},r)}}}function v(t,n){jQuery.ajax({url:"https://graph.facebook.com/"+t,dataType:"jsonp",success:function(t){e(".icon",n).each(function(){e(this).parent().attr("href",t.link)});e(".section-user a",n).each(function(){e(this).attr("href",t.link);e(this).text(t.name)})}})}function m(t,n){jQuery.ajax({url:"http://api.flickr.com/services/feeds/groups_pool.gne?id="+t+"&format=json&jsoncallback=?",dataType:"jsonp",success:function(t){e(".icon",n).each(function(){e(this).parent().attr("href",t.link)})}})}function g(e,t,n){var r="",t=encodeURIComponent(t),e=encodeURIComponent(e);r='<a href="http://www.facebook.com/sharer.php?u='+t+"&t="+e+'" class="share-facebook"></a>';r+='<a href="https://twitter.com/share?url='+t+"&text="+e+"&via="+n+'" class="share-twitter"></a>';r+='<a href="https://plus.google.com/share?url='+t+'" class="share-google"></a>';r+='<a href="http://www.linkedin.com/shareArticle?mini=true&url='+t+"&title="+e+'" class="share-linkedin"></a>';return r}SocialStreamObject=function(e,t){this.create(e,t)};e.extend(SocialStreamObject.prototype,{version:"1.5",create:function(t,n){this.defaults={feeds:{facebook:{id:"",intro:"Posted",out:"intro,thumb,title,text,user,share",text:"content",comments:3,image_width:6,icon:"facebook.png"},twitter:{id:"",intro:"Tweeted",search:"Tweeted",out:"intro,thumb,text,share",retweets:!1,replies:!1,images:"",url:"twitter.php",icon:"twitter.png"},google:{id:"",intro:"Shared",out:"intro,thumb,title,text,share",api_key:"",image_height:75,image_width:75,shares:!0,icon:"google.png"},youtube:{id:"",intro:"Uploaded,Favorite,New Video",search:"Search",out:"intro,thumb,title,text,user,share",feed:"uploads,favorites,newsubscriptionvideos",thumb:"default",icon:"youtube.png"},flickr:{id:"",intro:"Uploaded",out:"intro,thumb,title,text,share",lang:"en-us",icon:"flickr.png"},delicious:{id:"",intro:"Bookmarked",out:"intro,thumb,title,text,user,share",icon:"delicious.png"},pinterest:{id:"",intro:"Pinned",out:"intro,thumb,text,user,share",icon:"pinterest.png"},rss:{id:"",intro:"Posted",out:"intro,title,text,share",text:"contentSnippet",icon:"rss.png"},lastfm:{id:"",intro:"Listened to,Loved,Replied",out:"intro,thumb,title,text,user,share",feed:"recenttracks,lovedtracks,replytracker",icon:"lastfm.png"},dribbble:{id:"",intro:"Posted,Liked",out:"intro,thumb,title,text,user,share",feed:"shots,likes",icon:"dribbble.png"},vimeo:{id:"",intro:"Liked,Video,Appeared In,Video,Album,Channel,Group",out:"intro,thumb,title,text,user,share",feed:"likes,videos,appears_in,all_videos,albums,channels,groups",thumb:"medium",stats:!0,icon:"vimeo.png"},stumbleupon:{id:"",intro:"Shared,Reviewed",out:"intro,thumb,title,text,user,share",feed:"favorites,reviews",icon:"stumbleupon.png"},deviantart:{id:"",intro:"Deviation",out:"intro,thumb,title,text,user,share",icon:"deviantart.png"},tumblr:{id:"",intro:"Posted",out:"intro,title,text,user,share",thumb:100,video:250,icon:"tumblr.png"},instagram:{id:"",intro:"Posted",search:"Search",out:"intro,thumb,text,user,share,meta",accessToken:"",redirectUrl:"",clientId:"",thumb:"low_resolution",comments:3,likes:8,icon:"instagram.png"}},twitterId:"",days:10,limit:50,max:"days",external:!0,speed:600,height:550,wall:!1,order:"date",filter:!0,controls:!0,rotate:{direction:"up",delay:8e3},cache:!0,container:"dcsns",cstream:"stream",content:"dcsns-content",iconPath:"images/dcsns-dark/",imagePath:"images/dcsns-dark/",debug:!1};this.o={},this.timer_on=0,this.id="dcsns-"+e(t).index(),this.timerId="",this.o=e.extend(!0,this.defaults,n),opt=this.o,$load=e('<div class="dcsns-loading">creating stream ...</div>');e(t).addClass(this.o.container).append('<div class="'+this.o.content+'"><ul class="'+this.o.cstream+'"></ul></div>');var r=e("."+this.o.content,t),i=e("."+this.o.cstream,t),s=e("li",i);opt.height>0&&opt.wall==0&&r.css({height:opt.height+"px"});if(this.o.filter==1||this.o.controls==1){var o='<div class="dcsns-toolbar">';if(this.o.filter==1){o+='<ul id="dcsns-filter" class="option-set filter">';o+=this.o.wall==1?'<li><a href="#filter" data-group="dc-filter"  data-filter="*" class="selected link-all">all</a></li>':"";var u=e(".filter",t);e.each(opt.feeds,function(e,t){o+=t.id!=""?'<li class="active f-'+e+'"><a href="#filter" rel="'+e+'" data-group="dc-filter" data-filter=".dcsns-'+e+'"><img src="'+opt.imagePath+opt.feeds[e].icon+'" alt="" /></a></li>':""});o+="</ul>"}if(this.o.controls==1&&opt.wall==0){var a=this.o.rotate.delay<=0?"":'<li><a href="#" class="play"></a></li>';o+='<div class="controls"><ul>'+a+'<li><a href="#" class="prev"></a></li><li><a href="#" class="next"></a></li></ul></div>'}o+="</div>";opt.wall==0?e(t).append(o):e(t).before(o)}if(this.o.wall==1){e(".dcsns-toolbar").append($load);this.createwall(i)}else r.append($load);this.createstream(t,i,0,opt.days);this.addevents(t,i);this.o.rotate.delay>0&&this.rotate(t);$load.remove()},createstream:function(n,r,i,s){e.each(opt.feeds,function(r,o){if(opt.feeds[r].id!=""){var u=[];e.each(opt.feeds[r].intro.split(","),function(t,n){n=e.trim(n);u.push(n)});e.each(opt.feeds[r].id.split(","),function(o,a){a=e.trim(a);if(opt.feeds[r].feed&&a.split("#").length<2)r=="youtube"&&a.split("/").length>1?t(r,a,opt.iconPath,opt.feeds[r],n,opt,i,s,"posted","",o):e.each(opt.feeds[r].feed.split(","),function(e,o){t(r,a,opt.iconPath,opt.feeds[r],n,opt,i,s,u[e],o,e)});else{intro=a.split("#").length<2?opt.feeds[r].intro:opt.feeds[r].search;t(r,a,opt.iconPath,opt.feeds[r],n,opt,i,s,intro,"",o)}})}})},createwall:function(e){e.imagesLoaded(function(){e.isotope({itemSelector:"li.dcsns-li",getSortData:{postDate:function(e){return parseInt(e.attr("rel"),10)}},sortBy:"postDate"})})},addevents:function(t,n){var r=this,i=this.o.speed,s=e(".stream",t),o={};e(".controls",t).delegate("a","click",function(){var s=e(this).attr("class");switch(s){case"prev":r.pauseTimer();d(n,"prev",i);break;case"next":r.pauseTimer();d(n,"next",i);break;case"play":r.rotate(t);e(".controls .play").removeClass("play").addClass("pause");break;case"pause":r.pauseTimer()}return!1});e(".filter",t).delegate("a","click",function(){if(opt.wall==0){var t=e(this).attr("rel");if(e(this).parent().hasClass("active")){e(".dcsns-"+t,n).slideUp().addClass("inactive");e(this).parent().animate({opacity:.3},400)}else{e(".dcsns-"+t,n).slideDown().removeClass("inactive");e(this).parent().animate({opacity:1},400)}e(this).parent().toggleClass("active")}return!1});this.o.external&&n.delegate("a","click",function(){e(this).parent().hasClass("section-share")||(this.target="_blank")})},rotate:function(t){var n=this,r=e("."+this.o.cstream,t),i=this.o.speed,s=this.o.rotate.delay,o=this.o.rotate.direction=="up"?"prev":"next";this.timer_on=1;e(".controls .play").removeClass("play").addClass("pause");this.timerId=setTimeout(function(){d(r,o,i);n.rotate(t)},s)},pauseTimer:function(){clearTimeout(this.timerId);this.timer_on=0;e(".controls .pause").removeClass("pause").addClass("play")}});e.fn.dcSocialStream=function(t,n){var r={};this.each(function(){var i=e(this);r=i.data("socialtabs");if(!r){r=new SocialStreamObject(this,t,n);i.data("socialtabs",r)}});return r};Date.prototype.setRFC3339=function(e){var t,n,r=1,i=e.split("T"),s=i[0].split("-"),o=i[1].split(":"),u=o[o.length-1],a;offsetFieldIdentifier=u.charAt(u.length-1);if(offsetFieldIdentifier=="Z"){t=0;o[o.length-1]=u.substr(0,u.length-2)}else{if(u[u.length-1].indexOf("+")!=-1){n="+";r=1}else{n="-";r=-1}a=u.split(n);o[o.length-1]==a[0];a=a[1].split(":");t=a[0]*60+a[1];t=t*60*1e3}this.setTime(Date.UTC(s[0],s[1]-1,s[2],o[0],o[1],o[2])+t*r);return this};Date.prototype.setFbAlbum=function(e){var t,n="+",r=1,i=e.split("T"),s=i[0].split("-"),o=i[1].split(":"),u=o[o.length-1],a;if(u[u.length-1].indexOf("+")!=-1){n="-";r=-1}offsetTime=u.split(n);t=parseInt(offsetTime[1]/100,10)*60*1e3;this.setTime(Date.UTC(s[0],s[1]-1,s[2],o[0],o[1],offsetTime[0])+t*r);return this};Date.prototype.setVimeo=function(e){var t=0,n,r=1,i=e.split(" "),s=i[0].split("-"),o=i[1].split(":");this.setTime(Date.UTC(s[0],s[1]-1,s[2],o[0],o[1],o[2])+t*r);return this}})(jQuery);jQuery(window).load(function(){jQuery.getScript("//platform.twitter.com/widgets.js",function(){});jQuery(".section-share a").click(function(){var e=jQuery(this).attr("href");window.open(e,"sharer","toolbar=0,status=0,width=626,height=436");return!1});jQuery(".dcsns-facebook .section-text a").each(function(e){var t=jQuery(this).attr("href"),n=decodeURIComponent(t.replace("http://www.facebook.com/l.php?u=","")).split("&");jQuery(this).attr("href",n[0])})});